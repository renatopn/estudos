<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Quiz Interativo de Hist√≥ria e Geografia</title>
    <style>
        /* --- ESTILOS CSS --- */
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 20px;
        }

        #game-container, #memory-game-container {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 650px;
            min-height: 400px;
            margin-bottom: 20px;
        }
        
        #memory-game-container {
            display: none;
        }
        
        h1 {
            color: #4a90e2;
            text-align: center;
            font-size: 1.8em;
        }

        #question-display {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #e9f5ff;
            font-size: 1.1em;
            min-height: 60px;
            font-weight: bold;
        }

        .option-button {
            display: block;
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: none;
            border-radius: 5px;
            text-align: left;
            cursor: pointer;
            background-color: #a8d5ff;
            color: #1a4d7d;
            transition: background-color 0.3s;
            font-size: 1em;
        }

        .option-button:hover:not(:disabled) {
            background-color: #8ac0f0;
        }

        .correct {
            background-color: #4CAF50; /* Verde */
            color: white;
            pointer-events: none;
        }

        .incorrect {
            background-color: #F44336; /* Vermelho */
            color: white;
            pointer-events: none;
        }

        #next-button {
            display: none;
            padding: 10px 20px;
            margin-top: 15px;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: white;
            cursor: pointer;
            font-size: 1em;
            width: 100%;
        }

        #score-display {
            text-align: center;
            margin-top: 20px;
            font-weight: bold;
            color: #007bff;
        }

        #rationale-display {
            padding: 10px;
            margin-top: 10px;
            border-left: 5px solid #4a90e2;
            background-color: #f0f8ff;
            display: none;
            font-size: 0.9em;
        }

        #config-button {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            background-color: #ff9800;
            color: white;
            cursor: pointer;
            font-weight: bold;
            z-index: 5;
        }

        /* --- Estilos do Modal de Configura√ß√£o --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 10; 
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 90%; 
            max-width: 800px;
            border-radius: 8px;
        }
        
        #json-editor {
            width: 100%;
            height: 400px;
            margin-bottom: 10px;
            padding: 10px;
            box-sizing: border-box;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            resize: vertical;
        }

        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        #json-error {
            color: #f44336;
            margin-bottom: 10px;
            font-weight: bold;
        }

        /* --- Estilos do Jogo da Mem√≥ria --- */
        #memory-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            perspective: 1000px;
            margin-top: 20px;
        }

        .memory-card {
            width: 100%;
            height: 100px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            cursor: pointer;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            font-size: 0.8em;
            text-align: center;
            line-height: 1.2;
        }

        .memory-card.flipped {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 8px;
            padding: 5px;
            box-sizing: border-box;
            word-wrap: break-word;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.2;
        }

        .card-front {
            background-color: #e0f7fa;
            color: #00796b;
            transform: rotateY(180deg);
        }

        .card-back {
            background-color: #007bff;
            color: white;
            font-weight: bold;
            font-size: 1.5em;
        }
        
        .memory-card.matched .card-back, .memory-card.matched .card-front {
             background-color: #4CAF50 !important;
             color: white;
        }
        
        /* --- ESTILOS DO POPUP DE ALERTA PERSONALIZADO --- */
        #custom-alert-modal {
            display: none;
            position: fixed;
            z-index: 20;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(2px);
            justify-content: center;
            align-items: center;
        }

        #custom-alert-content {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            width: 80%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transform: scale(0.8);
            animation: bounceIn 0.3s forwards;
            border: 5px solid;
        }

        .alert-success {
            border-color: #4CAF50; /* Verde */
        }

        .alert-error {
            border-color: #F44336; /* Vermelho */
        }

        #alert-message {
            font-size: 1.2em;
            margin-bottom: 20px;
            font-weight: bold;
            color: #333;
        }

        #alert-ok-button {
            padding: 10px 25px;
            border: none;
            border-radius: 20px;
            background-color: #4a90e2;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        #alert-ok-button:hover {
            background-color: #357bd8;
        }

        @keyframes bounceIn {
            from { transform: scale(0.7); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        /* Fim dos estilos */
    </style>
</head>
<body>

    <button id="config-button">‚öôÔ∏è Configurar Jogo</button>

    <div id="game-container">
        <h1 id="quiz-title">Carregando Quiz...</h1>

        <div id="question-area">
            <p id="question-number"></p>
            <div id="question-display"></div>
            <div id="options-container">
                </div>
            <div id="rationale-display"></div>
            <button id="next-button">Pr√≥xima Pergunta</button>
        </div>

        <div id="score-display"></div>
    </div>
    
    <div id="memory-game-container">
        </div>

    <div id="config-modal" class="modal">
        <div class="modal-content">
            <h2>Editor de JSON do Quiz</h2>
            <p>Edite o conte√∫do das perguntas e do Jogo da Mem√≥ria. O formato JSON deve ser mantido!</p>
            <div id="json-error"></div>
            <textarea id="json-editor"></textarea>
            <div class="modal-buttons">
                <button id="save-json-button" style="background-color: #4CAF50; color: white;">Salvar e Atualizar</button>
                <button id="close-modal-button" style="background-color: #f44336; color: white;">Cancelar</button>
            </div>
        </div>
    </div>
    
    <div id="custom-alert-modal" class="modal">
        <div id="custom-alert-content">
            <p id="alert-message"></p>
            <button id="alert-ok-button">OK!</button>
        </div>
    </div>

    <script>
        // O JSON do Quiz (Mantido com as altera√ß√µes anteriores)
          const defaultQuizData = {
            "settings": {
                "title": "Super Quiz: Hist√≥ria e Geografia - Escolas e o Trabalho",
                "version": "3.0 - Expandido",
                "description": "Inclui quest√µes de m√∫ltipla escolha, Certo/Errado e 3 n√≠veis de Jogo da Mem√≥ria B√¥nus."
            },
            "questions": [
                // PERGUNTAS 1 a 10 (Mantidas)
                { "questionNumber": 1, "type": "quiz", "question": "De acordo com a lei brasileira, qual √© o principal objetivo de todas as crian√ßas terem direito √† educa√ß√£o?", "answerOptions": [ { "text": "Apenas garantir que o aluno aprenda a ler e escrever.", "rationale": "A educa√ß√£o tem um papel mais amplo do que apenas alfabetizar.", "isCorrect": false }, { "text": "Garantir o pleno desenvolvimento, o exerc√≠cio da cidadania e a qualifica√ß√£o para o trabalho.", "rationale": "A lei estabelece que a educa√ß√£o √© essencial para o desenvolvimento completo do indiv√≠duo.", "isCorrect": true }, { "text": "Separar meninos e meninas para estudarem disciplinas diferentes.", "rationale": "Essa separa√ß√£o de disciplinas por g√™nero era uma pr√°tica do passado.", "isCorrect": false }, { "text": "Manter os alunos longe de casa durante o dia.", "rationale": "Este n√£o √© o objetivo fundamental da garantia legal da educa√ß√£o.", "isCorrect": false } ] },
                { "questionNumber": 2, "type": "boolean", "question": "Certo ou Errado: No passado, disciplinas como Latim, Franc√™s, Caligrafia e Bordado j√° foram obrigat√≥rias no curr√≠culo escolar brasileiro.", "correctAnswer": true, "rationale": "CERTO! O texto do livro confirma que essas disciplinas fizeram parte do curr√≠culo em outras √©pocas, como Latim, Bordado e Caligrafia.", "answerOptions": [ { "text": "Certo", "isCorrect": true }, { "text": "Errado", "isCorrect": false } ] },
                { "questionNumber": 3, "type": "quiz", "question": "Quem foram os primeiros respons√°veis pelo ensino das crian√ßas ind√≠genas no Brasil, ap√≥s a chegada dos portugueses?", "answerOptions": [ { "text": "Os √≠ndios mais velhos das aldeias.", "rationale": "Eles transmitiam por tradi√ß√£o oral, mas os **primeiros professores formais** foram os jesu√≠tas.", "isCorrect": false }, { "text": "Os padres jesu√≠tas.", "rationale": "Os padres jesu√≠tas vieram ao Brasil com o objetivo de catequizar e foram os primeiros a organizar o ensino formal.", "isCorrect": true }, { "text": "Os nobres que fugiram da Europa na Idade M√©dia.", "rationale": "A nobreza n√£o foi respons√°vel pelo in√≠cio do ensino formal no Brasil.", "isCorrect": false }, { "text": "As m√£es das crian√ßas ind√≠genas.", "rationale": "As m√£es tinham o papel de educar tarefas dom√©sticas, mas n√£o eram as professoras formais da √©poca.", "isCorrect": false } ] },
                { "questionNumber": 4, "type": "boolean", "question": "Certo ou Errado: A produ√ß√£o de qualquer objeto, como o tijolo, envolve apenas a etapa de **extra√ß√£o** da mat√©ria-prima, n√£o necessitando de transporte ou venda.", "correctAnswer": false, "rationale": "ERRADO! O processo completo envolve **extra√ß√£o**, **transforma√ß√£o** e **comercializa√ß√£o** (venda e distribui√ß√£o/transporte).", "answerOptions": [ { "text": "Certo", "isCorrect": true }, { "text": "Errado", "isCorrect": false } ] },
                { "questionNumber": 5, "type": "quiz", "question": "Na Gr√©cia Antiga, quais eram as duas principais disciplinas que os meninos aprendiam para se tornarem bons guerreiros e desenvolverem o racioc√≠nio?", "answerOptions": [ { "text": "Astronomia e Artes Marciais.", "rationale": "Aulas de gin√°stica e m√∫sica eram as principais para o desenvolvimento do f√≠sico e da mente.", "isCorrect": false }, { "text": "Gin√°stica e M√∫sica.", "rationale": "Os meninos gregos aprendiam gin√°stica para o f√≠sico e m√∫sica (incluindo a lira) para o desenvolvimento da mente e do racioc√≠nio.", "isCorrect": true }, { "text": "Bordado e Caligrafia.", "rationale": "Bordado era ensinado √†s meninas.", "isCorrect": false }, { "text": "T√©cnicas agr√≠colas e Latim.", "rationale": "Essas foram disciplinas no Brasil em √©pocas mais recentes.", "isCorrect": false } ] },
                { "questionNumber": 6, "type": "boolean", "question": "Certo ou Errado: A lousa digital √© um recurso moderno que, al√©m de ser interativo, permite visitar exposi√ß√µes e acervos de museus pela internet.", "correctAnswer": true, "rationale": "CERTO! A tecnologia na escola permite encurtar dist√¢ncias e ter acesso a museus e exposi√ß√µes virtualmente.", "answerOptions": [ { "text": "Certo", "isCorrect": true }, { "text": "Errado", "isCorrect": false } ] },
                { "questionNumber": 7, "type": "quiz", "question": "O que a tradi√ß√£o de 'ensinar de maneira oral' significava para os povos ind√≠genas e do Oriente?", "answerOptions": [ { "text": "Aulas usando a lousa digital.", "rationale": "A lousa digital √© uma tecnologia moderna.", "isCorrect": false }, { "text": "Transmitir ensinamentos, hist√≥rias e tradi√ß√µes principalmente pela fala e pela mem√≥ria.", "rationale": "A tradi√ß√£o oral consiste em transmitir o conhecimento de gera√ß√£o para gera√ß√£o atrav√©s da fala.", "isCorrect": true }, { "text": "Aulas de bordado e costura.", "rationale": "Estas s√£o disciplinas que j√° foram obrigat√≥rias, mas n√£o definem a tradi√ß√£o oral.", "isCorrect": false }, { "text": "Obriga√ß√£o de aprender Latim e Franc√™s.", "rationale": "Latim e Franc√™s eram disciplinas obrigat√≥rias no Brasil em certa √©poca, mas n√£o t√™m rela√ß√£o com a tradi√ß√£o oral.", "isCorrect": false } ] },
                { "questionNumber": 8, "type": "boolean", "question": "Certo ou Errado: O √°baco, a caneta tinteiro e a bolsa ud√°cia (maleta) s√£o exemplos de objetos escolares usados atualmente.", "correctAnswer": false, "rationale": "ERRADO! Esses s√£o exemplos de objetos escolares **antigos**, substitu√≠dos por materiais mais modernos hoje.", "answerOptions": [ { "text": "Certo", "isCorrect": true }, { "text": "Errado", "isCorrect": false } ] },
                { "questionNumber": 9, "type": "quiz", "question": "Qual era o foco do trabalho das crian√ßas camponesas na Idade M√©dia?", "answerOptions": [ { "text": "Com√©rcio mar√≠timo e navega√ß√£o.", "rationale": "O foco era na vida no campo, n√£o no com√©rcio mar√≠timo.", "isCorrect": false }, { "text": "Agricultura e pecu√°ria.", "rationale": "A agricultura (plantar) e a pecu√°ria (cuidar de animais) eram as principais atividades de quem vivia no campo naquela √©poca.", "isCorrect": true }, { "text": "Tecnologia e programa√ß√£o de computadores.", "rationale": "Tecnologia e programa√ß√£o s√£o atividades modernas.", "isCorrect": false }, { "text": "C√°lculo matem√°tico avan√ßado e f√≠sica.", "rationale": "O aprendizado era pr√°tico, focado na sobreviv√™ncia.", "isCorrect": false } ] },
                { "questionNumber": 10, "type": "boolean", "question": "Certo ou Errado: A palmat√≥ria era um objeto usado antigamente para bater na m√£o dos alunos com mau comportamento, e ainda √© permitida em algumas escolas hoje.", "correctAnswer": false, "rationale": "ERRADO! O uso de palmat√≥ria e outros castigos f√≠sicos √© proibido nas escolas atuais.", "answerOptions": [ { "text": "Certo", "isCorrect": true }, { "text": "Errado", "isCorrect": false } ] },

                // PERGUNTAS 11 a 30 (NOVAS)
                { "questionNumber": 11, "type": "quiz", "question": "Qual √© o principal benef√≠cio da lousa digital para o aprendizado, segundo o texto?", "answerOptions": [ { "text": "Possibilidade de visualizar conte√∫dos em 3D e acessar museus virtuais.", "rationale": "A lousa digital √© citada como um recurso que permite a visualiza√ß√£o de conte√∫dos interativos e o acesso a acervos pela internet.", "isCorrect": true }, { "text": "Garantir que a lousa nunca mais precise ser apagada.", "rationale": "A lousa precisa ser apagada, mas pode salvar o conte√∫do.", "isCorrect": false }, { "text": "Apenas reduzir o custo de material escolar.", "rationale": "Embora possa reduzir, o principal benef√≠cio √© o acesso e a interatividade.", "isCorrect": false }, { "text": "Substituir totalmente a figura do professor.", "rationale": "A lousa √© um aux√≠lio, n√£o um substituto para o professor.", "isCorrect": false } ] },
                { "questionNumber": 12, "type": "boolean", "question": "Certo ou Errado: O √°baco, instrumento de c√°lculo antigo, n√£o tinha rela√ß√£o com o ensino de matem√°tica nas escolas do passado.", "correctAnswer": false, "rationale": "ERRADO! O √°baco foi, sim, um importante instrumento usado no ensino de matem√°tica em √©pocas passadas.", "answerOptions": [ { "text": "Certo", "isCorrect": true }, { "text": "Errado", "isCorrect": false } ] },
                { "questionNumber": 13, "type": "quiz", "question": "O que o texto indica como o papel principal da escola na vida da crian√ßa e do adolescente?", "answerOptions": [ { "text": "Apenas memorizar datas e nomes de reis.", "rationale": "O papel da escola √© mais amplo e focado no desenvolvimento integral.", "isCorrect": false }, { "text": "Preparar para o pleno desenvolvimento e o exerc√≠cio da cidadania.", "rationale": "Este √© o objetivo legal da educa√ß√£o no Brasil.", "isCorrect": true }, { "text": "Ensinar exclusivamente o uso de novas tecnologias.", "rationale": "A tecnologia √© uma ferramenta, mas n√£o o objetivo principal.", "isCorrect": false }, { "text": "Garantir que todos se tornem agricultores ou pecuaristas.", "rationale": "√â um objetivo de qualifica√ß√£o para o trabalho em geral, n√£o limitado a essas √°reas.", "isCorrect": false } ] },
                { "questionNumber": 14, "type": "boolean", "question": "Certo ou Errado: A inven√ß√£o da roda est√° relacionada apenas √† ind√∫stria, sem impacto no trabalho agr√≠cola.", "correctAnswer": false, "rationale": "ERRADO! A roda teve um impacto fundamental no transporte, afetando desde o trabalho agr√≠cola (carregamento) at√© a ind√∫stria.", "answerOptions": [ { "text": "Certo", "isCorrect": true }, { "text": "Errado", "isCorrect": false } ] },
                { "questionNumber": 15, "type": "quiz", "question": "Na √°rea de trabalho, o que representou o tear mec√¢nico?", "answerOptions": [ { "text": "Um objeto escolar usado na aula de Bordado.", "rationale": "√â uma m√°quina industrial, n√£o um objeto escolar.", "isCorrect": false }, { "text": "Uma m√°quina capaz de produzir tecidos de forma mais r√°pida do que o trabalho manual.", "rationale": "O tear mec√¢nico foi um s√≠mbolo da Revolu√ß√£o Industrial e da mecaniza√ß√£o.", "isCorrect": true }, { "text": "A m√°quina que transformava argila em tijolos.", "rationale": "√â um tear, usado na ind√∫stria t√™xtil.", "isCorrect": false }, { "text": "O primeiro computador da hist√≥ria.", "rationale": "√â uma m√°quina t√™xtil.", "isCorrect": false } ] },
                { "questionNumber": 16, "type": "boolean", "question": "Certo ou Errado: No passado, o estudo de Latim e o bordado eram disciplinas obrigat√≥rias para meninos e meninas, respectivamente.", "correctAnswer": true, "rationale": "CERTO! O curr√≠culo antigo separava disciplinas por g√™nero, sendo o Latim mais focado nos meninos e o Bordado nas meninas.", "answerOptions": [ { "text": "Certo", "isCorrect": true }, { "text": "Errado", "isCorrect": false } ] },
                { "questionNumber": 17, "type": "quiz", "question": "Qual √© uma das transforma√ß√µes mais significativas no trabalho, causada pela tecnologia, de acordo com as imagens?", "answerOptions": [ { "text": "O aumento da necessidade de caligrafia manual.", "rationale": "O computador reduziu a necessidade de caligrafia manual.", "isCorrect": false }, { "text": "A substitui√ß√£o de tarefas manuais repetitivas por m√°quinas.", "rationale": "A mecaniza√ß√£o e a automa√ß√£o s√£o as maiores transforma√ß√µes tecnol√≥gicas no trabalho.", "isCorrect": true }, { "text": "O fim completo da agricultura no mundo.", "rationale": "A agricultura ainda existe, mas √© mais mecanizada.", "isCorrect": false }, { "text": "O retorno da palmat√≥ria nas escolas.", "rationale": "A palmat√≥ria √© proibida.", "isCorrect": false } ] },
                { "questionNumber": 18, "type": "boolean", "question": "Certo ou Errado: A vida no campo (agricultura e pecu√°ria) n√£o √© considerada trabalho, pois √© um modo de vida mais simples.", "correctAnswer": false, "rationale": "ERRADO! Agricultura (plantio) e Pecu√°ria (cria√ß√£o de animais) s√£o formas de trabalho prim√°rias e essenciais para a economia.", "answerOptions": [ { "text": "Certo", "isCorrect": true }, { "text": "Errado", "isCorrect": false } ] },
                { "questionNumber": 19, "type": "quiz", "question": "Qual objeto era usado nas escolas do passado para castigar fisicamente os alunos com mau comportamento?", "answerOptions": [ { "text": "O √°baco.", "rationale": "O √°baco era usado para o c√°lculo.", "isCorrect": false }, { "text": "Palmat√≥ria.", "rationale": "A palmat√≥ria era o instrumento de puni√ß√£o f√≠sica.", "isCorrect": true }, { "text": "O tear mec√¢nico.", "rationale": "O tear era uma m√°quina industrial.", "isCorrect": false }, { "text": "A bolsa ud√°cia.", "rationale": "A bolsa era usada para carregar livros.", "isCorrect": false } ] },
                { "questionNumber": 20, "type": "boolean", "question": "Certo ou Errado: A tradi√ß√£o oral √© um m√©todo de ensino que depende inteiramente de livros e da escrita.", "correctAnswer": false, "rationale": "ERRADO! A tradi√ß√£o oral se baseia na fala, na audi√ß√£o e na mem√≥ria para a transmiss√£o do conhecimento, sendo anterior √† escrita.", "answerOptions": [ { "text": "Certo", "isCorrect": true }, { "text": "Errado", "isCorrect": false } ] },
                { "questionNumber": 21, "type": "quiz", "question": "O que a pecu√°ria representa na cadeia de trabalho e produ√ß√£o?", "answerOptions": [ { "text": "O plantio de alimentos como arroz e feij√£o.", "rationale": "Isto √© agricultura.", "isCorrect": false }, { "text": "A cria√ß√£o de animais para consumo, produ√ß√£o de leite ou couro.", "rationale": "A pecu√°ria √© a cria√ß√£o de animais.", "isCorrect": true }, { "text": "A venda de produtos industrializados em lojas.", "rationale": "Isto √© comercializa√ß√£o/com√©rcio.", "isCorrect": false }, { "text": "A extra√ß√£o de minerais do solo.", "rationale": "Isto √© extrativismo mineral.", "isCorrect": false } ] },
                { "questionNumber": 22, "type": "boolean", "question": "Certo ou Errado: A fun√ß√£o da escola mudou ao longo da hist√≥ria, refletindo as necessidades de cada sociedade.", "correctAnswer": true, "rationale": "CERTO! A escola se adaptou, passando de um foco na religi√£o e latim para um foco na ci√™ncia e qualifica√ß√£o para o trabalho moderno.", "answerOptions": [ { "text": "Certo", "isCorrect": true }, { "text": "Errado", "isCorrect": false } ] },
                { "questionNumber": 23, "type": "quiz", "question": "Em que √©poca os meninos da Gr√©cia Antiga aprendiam Gin√°stica e M√∫sica?", "answerOptions": [ { "text": "Para desenvolver o corpo e o racioc√≠nio, preparando-os para serem bons cidad√£os e guerreiros.", "rationale": "Era o foco da educa√ß√£o cl√°ssica grega para os meninos.", "isCorrect": true }, { "text": "Para se qualificarem para trabalhar na agricultura local.", "rationale": "Este era o foco de camponeses na Idade M√©dia, n√£o na Gr√©cia cl√°ssica.", "isCorrect": false }, { "text": "Para se prepararem para o trabalho na ind√∫stria t√™xtil.", "rationale": "A ind√∫stria t√™xtil √© muito mais recente.", "isCorrect": false }, { "text": "Apenas para se divertirem no tempo livre.", "rationale": "O ensino era s√©rio, focado na forma√ß√£o do cidad√£o.", "isCorrect": false } ] },
                { "questionNumber": 24, "type": "boolean", "question": "Certo ou Errado: O processo de produ√ß√£o de um objeto (como um tijolo) tem apenas as etapas de transforma√ß√£o e comercializa√ß√£o, sem a extra√ß√£o.", "correctAnswer": false, "rationale": "ERRADO! A argila (mat√©ria-prima do tijolo) precisa ser extra√≠da da natureza. O processo √©: Extra√ß√£o $\to$ Transforma√ß√£o $\to$ Comercializa√ß√£o.", "answerOptions": [ { "text": "Certo", "isCorrect": true }, { "text": "Errado", "isCorrect": false } ] },
                { "questionNumber": 25, "type": "quiz", "question": "Qual disciplina, citada no texto como sendo do passado, envolvia o aprendizado de escrever de forma bonita e detalhada?", "answerOptions": [ { "text": "Latim.", "rationale": "Latim √© um idioma, n√£o focado na est√©tica da escrita.", "isCorrect": false }, { "text": "Caligrafia.", "rationale": "A caligrafia era a arte de escrever de forma ornamental.", "isCorrect": true }, { "text": "Bordado.", "rationale": "Bordado √© costura, n√£o escrita.", "isCorrect": false }, { "text": "Aritm√©tica.", "rationale": "Aritm√©tica √© c√°lculo.", "isCorrect": false } ] },
                { "questionNumber": 26, "type": "boolean", "question": "Certo ou Errado: Os padres jesu√≠tas, ao chegarem ao Brasil, tiveram como um de seus focos a catequiza√ß√£o e o ensino formal dos ind√≠genas.", "correctAnswer": true, "rationale": "CERTO! Os jesu√≠tas vieram com a miss√£o de catequizar, sendo os primeiros a fundar escolas no Brasil Col√¥nia.", "answerOptions": [ { "text": "Certo", "isCorrect": true }, { "text": "Errado", "isCorrect": false } ] },
                { "questionNumber": 27, "type": "quiz", "question": "O que o texto mostra como o principal efeito da tecnologia (como o uso de um computador) no trabalho moderno?", "answerOptions": [ { "text": "O fim dos trabalhos que exigem criatividade.", "rationale": "A tecnologia ajuda a criar, mas automatiza o repetitivo.", "isCorrect": false }, { "text": "Aumento da velocidade de produ√ß√£o e comunica√ß√£o.", "rationale": "A tecnologia √© crucial para a rapidez e efici√™ncia na era moderna.", "isCorrect": true }, { "text": "A redu√ß√£o da jornada de trabalho para apenas uma hora por dia.", "rationale": "A jornada de trabalho ainda √© maior que uma hora.", "isCorrect": false }, { "text": "A necessidade de usar apenas palmat√≥ria.", "rationale": "Palmat√≥ria √© proibida.", "isCorrect": false } ] },
                { "questionNumber": 28, "type": "boolean", "question": "Certo ou Errado: Em compara√ß√£o com as escolas do passado, as escolas atuais tendem a ser menos rigorosas quanto a castigos f√≠sicos.", "correctAnswer": true, "rationale": "CERTO! A palmat√≥ria e outros castigos n√£o s√£o mais permitidos.", "answerOptions": [ { "text": "Certo", "isCorrect": true }, { "text": "Errado", "isCorrect": false } ] },
                { "questionNumber": 29, "type": "quiz", "question": "Qual √© um exemplo de objeto escolar antigo que n√£o √© mais comumente usado nas salas de aula atuais?", "answerOptions": [ { "text": "L√°pis.", "rationale": "L√°pis ainda s√£o muito usados.", "isCorrect": false }, { "text": "Caneta esferogr√°fica.", "rationale": "Esta √© moderna.", "isCorrect": false }, { "text": "Caneta tinteiro.", "rationale": "A caneta tinteiro foi substitu√≠da pela esferogr√°fica, sendo um objeto antigo.", "isCorrect": true }, { "text": "Borracha.", "rationale": "Borracha ainda √© usada.", "isCorrect": false } ] },
                { "questionNumber": 30, "type": "boolean", "question": "Certo ou Errado: A agricultura e a pecu√°ria sempre foram atividades importantes, mas a forma de trabalho (manual ou mecanizada) se alterou com o tempo.", "correctAnswer": true, "rationale": "CERTO! As atividades s√£o milenares, mas a tecnologia (m√°quinas, tratores) mudou como o trabalho √© feito.", "answerOptions": [ { "text": "Certo", "isCorrect": true }, { "text": "Errado", "isCorrect": false } ] }
            ],
            // ESTRUTURA DOS JOGOS DA MEM√ìRIA
            "memoryGameSets": [
                // CONJUNTO 1 (PARA 5 ACERTOS)
                { "term": "Palmat√≥ria", "concept": "Instrumento de castigo f√≠sico, proibido hoje." },
                { "term": "Jesu√≠tas", "concept": "Os primeiros a ensinar no Brasil Col√¥nia." },
                { "term": "Lousa Digital", "concept": "Tecnologia que permite 3D e acesso a sites." },
                { "term": "Argila", "concept": "Recurso natural usado para fazer tijolos." },
                { "term": "Gr√©cia Antiga", "concept": "Local onde meninos aprendiam Gin√°stica e M√∫sica." },
                { "term": "Tradi√ß√£o Oral", "concept": "Ensino pela fala, valorizando a mem√≥ria." },
                { "term": "Caneta Tinteiro", "concept": "Objeto escolar antigo que usava tinta." },
                { "term": "Cidadania", "concept": "Objetivo da educa√ß√£o para o pleno desenvolvimento." }
                // FIM CONJUNTO 1
            ],
            // NOVO: CONJUNTO 2 (PARA 10 ACERTOS)
            "memoryGameSets2": [
                { "term": "Caligrafia", "concept": "Disciplina antiga que ensinava a escrever de forma bonita." },
                { "term": "Tear Mec√¢nico", "concept": "M√°quina que substituiu a produ√ß√£o manual de tecidos." },
                { "term": "Roda", "concept": "Inven√ß√£o que revolucionou o transporte de mercadorias." },
                { "term": "Cria√ß√£o de Gado", "concept": "O que significa a atividade de Pecu√°ria." },
                { "term": "Latim/Franc√™s", "concept": "Idiomas que j√° foram obrigat√≥rios no curr√≠culo escolar." },
                { "term": "Abandono Escolar", "concept": "Um desafio que a educa√ß√£o moderna tenta combater." },
                { "term": "Comercializa√ß√£o", "concept": "Etapa final do processo produtivo (venda e distribui√ß√£o)." },
                { "term": "Bolsa Ud√°cia", "concept": "Maleta/bolsa usada antigamente para carregar livros." }
                // FIM CONJUNTO 2
            ],
            // NOVO: CONJUNTO 3 (PARA 15 ACERTOS)
            "memoryGameSets3": [
                { "term": "Sapiens", "concept": "Refere-se √† esp√©cie humana, a que pensa e sabe." },
                { "term": "Lira", "concept": "Instrumento musical usado no ensino da M√∫sica na Gr√©cia." },
                { "term": "Extra√ß√£o", "concept": "Primeira etapa da produ√ß√£o, retirada da mat√©ria-prima da natureza." },
                { "term": "Trabalho Industrial", "concept": "Atividade focada na transforma√ß√£o da mat√©ria-prima em produtos." },
                { "term": "Catequiza√ß√£o", "concept": "Objetivo principal dos Jesu√≠tas ao ensinar os ind√≠genas." },
                { "term": "Gin√°stica", "concept": "Disciplina grega para o desenvolvimento do corpo (f√≠sico)." },
                { "term": "Mecaniza√ß√£o", "concept": "Uso de m√°quinas para substituir o trabalho manual." },
                { "term": "Digital", "concept": "Tipo de lousa que permite intera√ß√£o e conex√£o com a internet." }
                // FIM CONJUNTO 3
            ]
        };


        // --- Vari√°veis de Estado ---
        let quizData = defaultQuizData;
        let currentQuestionIndex = 0;
        let score = 0;
        let questions = [];
        let isMemoryGameActive = false;
        let flippedCards = [];
        let matchedPairs = 0;

        // --- Elementos do DOM ---
        const quizTitleElement = document.getElementById('quiz-title');
        const questionDisplay = document.getElementById('question-display');
        const questionNumberElement = document.getElementById('question-number');
        const optionsContainer = document.getElementById('options-container');
        const nextButton = document.getElementById('next-button');
        const scoreDisplay = document.getElementById('score-display');
        const rationaleDisplay = document.getElementById('rationale-display');
        const gameContainer = document.getElementById('game-container');
        const memoryGameContainer = document.getElementById('memory-game-container');

        // Elementos do Modal de Configura√ß√£o
        const configButton = document.getElementById('config-button');
        const configModal = document.getElementById('config-modal');
        const jsonEditor = document.getElementById('json-editor');
        const saveJsonButton = document.getElementById('save-json-button');
        const closeModalButton = document.getElementById('close-modal-button');
        const jsonError = document.getElementById('json-error');
        
        // Elementos do Popup de Alerta Personalizado
        const customAlertModal = document.getElementById('custom-alert-modal');
        const customAlertContent = document.getElementById('custom-alert-content');
        const alertMessage = document.getElementById('alert-message');
        const alertOkButton = document.getElementById('alert-ok-button');

        // --- L√≥gica do Popup Personalizado ---
        function showCustomAlert(message, isSuccess = true) {
            alertMessage.textContent = message;
            
            customAlertContent.classList.remove('alert-success', 'alert-error');
            if (isSuccess) {
                customAlertContent.classList.add('alert-success');
            } else {
                customAlertContent.classList.add('alert-error');
            }
            
            customAlertModal.style.display = 'flex';
        }

        function closeCustomAlert() {
            customAlertModal.style.display = 'none';
        }
        
        alertOkButton.addEventListener('click', closeCustomAlert);
        
        // --- L√≥gica do Jogo Principal (Quiz) ---

        function loadQuiz() {
            const savedQuiz = localStorage.getItem('quizContent');
            if (savedQuiz) {
                try {
                  //  quizData = JSON.parse(savedQuiz);
                } catch (e) {
                    console.error("Erro ao carregar JSON do LocalStorage, usando dados padr√£o.", e);
                    quizData = defaultQuizData;
                }
            } else {
                localStorage.setItem('quizContent', JSON.stringify(defaultQuizData, null, 2));
            }

            questions = quizData.questions;
            quizTitleElement.textContent = quizData.settings.title;
            score = 0;
            currentQuestionIndex = 0;
            isMemoryGameActive = false;
            
            gameContainer.style.display = 'block';
            memoryGameContainer.style.display = 'none';

            if (questions.length === 0) {
                questionDisplay.textContent = "Nenhuma pergunta carregada. Por favor, configure o jogo.";
                return;
            }

            showQuestion();
            updateScoreDisplay();
        }

        function showQuestion() {
            if (currentQuestionIndex >= questions.length) {
                showResults();
                return;
            }
            
            // L√ìGICA DE CORRE√á√ÉO: Pula a checagem de b√¥nus se o jogo acabou de sair do Memory Game
            if (!isMemoryGameActive && score > 0 && score % 5 === 0) {
                isMemoryGameActive = true;
                showMemoryGame();
                return;
            }else if (isMemoryGameActive && score > 0 && score % 5 === 0) {
                isMemoryGameActive = false;
            }


            const currentQuestion = questions[currentQuestionIndex];
            
            optionsContainer.innerHTML = '';
            rationaleDisplay.style.display = 'none';
            nextButton.style.display = 'none';

            questionNumberElement.textContent = `Pergunta ${currentQuestionIndex + 1} de ${questions.length}:`;
            questionDisplay.textContent = currentQuestion.question;

            currentQuestion.answerOptions.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option.text;
                button.classList.add('option-button');
                button.addEventListener('click', () => checkAnswer(button, option, currentQuestion.type));
                optionsContainer.appendChild(button);
            });
        }

        function checkAnswer(selectedButton, selectedOption, type) {
            let isCorrect;
            const currentQuestion = questions[currentQuestionIndex];
            
            if (type === 'quiz') {
                isCorrect = selectedOption.isCorrect;
            } else if (type === 'boolean') {
                isCorrect = selectedOption.text === (currentQuestion.correctAnswer ? "Certo" : "Errado");
            }

            const allButtons = optionsContainer.querySelectorAll('.option-button');
            allButtons.forEach(btn => btn.disabled = true);
            
            if (isCorrect) {
                score++;
                selectedButton.classList.add('correct');
                rationaleDisplay.textContent = currentQuestion.rationale || 'Resposta correta! Muito bem!';
            } else {
                selectedButton.classList.add('incorrect');
                
                let correctAnswerText;
                if (type === 'boolean') {
                    correctAnswerText = currentQuestion.correctAnswer ? "Certo" : "Errado";
                } else {
                    correctAnswerText = currentQuestion.answerOptions.find(opt => opt.isCorrect).text;
                }

                const correctButton = Array.from(allButtons).find(btn => btn.textContent === correctAnswerText);
                if (correctButton) {
                    correctButton.classList.add('correct');
                }
                rationaleDisplay.textContent = selectedOption.rationale || currentQuestion.rationale || 'Ops, resposta incorreta.';
            }

            rationaleDisplay.style.display = 'block';
            updateScoreDisplay();
            
            // Adicionado aqui para garantir que o b√¥nus s√≥ seja checado depois de incrementar o score
            // e antes de ir para a pr√≥xima quest√£o.
            if (score > 0 && score % 5 === 0 && !isMemoryGameActive) {
                nextButton.textContent = "Iniciar B√¥nus!";
                nextButton.style.display = 'block';
            } else {
                nextButton.textContent = "Pr√≥xima Pergunta";
                nextButton.style.display = 'block';
            }
        }

        function nextQuestion() {
            // L√ìGICA DE CORRE√á√ÉO: Se est√° no estado de b√¥nus, apenas chama o showQuestion
            if (isMemoryGameActive) {
                // A l√≥gica de transi√ß√£o para o Memory Game √© chamada dentro do showQuestion
                showQuestion(); 
            } else {
                currentQuestionIndex++;
                showQuestion();
            }
        }

        function showResults() {
            questionNumberElement.textContent = 'FIM DO QUIZ!';
            questionDisplay.textContent = `Voc√™ completou o Quiz!`;
            optionsContainer.innerHTML = '';
            rationaleDisplay.style.display = 'none';
            nextButton.style.display = 'none';
            scoreDisplay.innerHTML = `Sua pontua√ß√£o final √©: ${score} de ${questions.length}. **Parab√©ns!**`;

            const restartButton = document.createElement('button');
            restartButton.textContent = 'Jogar Novamente';
            restartButton.id = 'next-button';
            restartButton.style.display = 'block';
            restartButton.addEventListener('click', loadQuiz);
            optionsContainer.appendChild(restartButton);
        }

        function updateScoreDisplay() {
            scoreDisplay.textContent = `Pontua√ß√£o: ${score} / ${questions.length}`;
        }

        // --- L√≥gica do Jogo da Mem√≥ria B√¥nus ---

        function showMemoryGame() {
            gameContainer.style.display = 'none';
            memoryGameContainer.style.display = 'block';
            memoryGameContainer.innerHTML = '<h2>üèÜ B√îNUS: Jogo da Mem√≥ria! üèÜ</h2><p>Encontre os 8 pares (Termo e Conceito) para continuar o Quiz!</p>';
            
            let cardData = quizData.memoryGameSets;
            switch (score / 5) {
                case 1:
                    cardData = quizData.memoryGameSets;
                    break;
                case 2:
                    cardData = quizData.memoryGameSets2;
                    break;
                case 3:
                    cardData = quizData.memoryGameSets3;
                    break;
                default:
                    cardData = quizData.memoryGameSets;
            }
            
            let cards = [];
            cardData.forEach(pair => {
                cards.push({ id: pair.term, content: pair.term, type: 'term' });
                cards.push({ id: pair.term, content: pair.concept, type: 'concept' });
            });

            cards.sort(() => 0.5 - Math.random());

            const board = document.createElement('div');
            board.id = 'memory-board';
            memoryGameContainer.appendChild(board);

            flippedCards = [];
            matchedPairs = 0;

            cards.forEach(cardData => {
                const card = document.createElement('div');
                card.classList.add('memory-card');
                card.dataset.id = cardData.id;
                card.dataset.type = cardData.type;
                
                const front = document.createElement('div');
                front.classList.add('card-front');
                front.textContent = cardData.content;
                
                const back = document.createElement('div');
                back.classList.add('card-back');
                back.textContent = '?'; 

                card.appendChild(front);
                card.appendChild(back);

                card.addEventListener('click', () => flipCard(card));
                board.appendChild(card);
            });
        }
        
        // ... (flipCard, checkForMatch, disableCards, unflipCards mantidas) ...

        function flipCard(card) {
            if (card.classList.contains('flipped') || flippedCards.length === 2) {
                return;
            }

            card.classList.add('flipped');
            flippedCards.push(card);

            if (flippedCards.length === 2) {
                checkForMatch();
            }
        }

        function checkForMatch() {
            const [card1, card2] = flippedCards;

            const isMatch = (card1.dataset.id === card2.dataset.id) && (card1.dataset.type !== card2.dataset.type);

            if (isMatch) {
                matchedPairs++;
                disableCards(card1, card2);
                if (matchedPairs === quizData.memoryGameSets.length) {
                    setTimeout(endMemoryGame, 1000);
                }
            } else {
                setTimeout(() => unflipCards(card1, card2), 1000);
            }
        }

        function disableCards(card1, card2) {
            card1.classList.add('matched');
            card2.classList.add('matched');
            card1.removeEventListener('click', flipCard);
            card2.removeEventListener('click', flipCard);
            flippedCards = [];
        }

        function unflipCards(card1, card2) {
            card1.classList.remove('flipped');
            card2.classList.remove('flipped');
            flippedCards = [];
        }
        
        function endMemoryGame() {
            
            showCustomAlert("Parab√©ns! Voc√™ completou o Jogo da Mem√≥ria B√¥nus! O Quiz ser√° retomado.", true);
            
            memoryGameContainer.style.display = 'none';
            gameContainer.style.display = 'block';
            
            // Avan√ßa para a pr√≥xima pergunta ap√≥s o b√¥nus
            currentQuestionIndex++;
            showQuestion(); 
        }

        // --- L√≥gica do Modal de Configura√ß√£o ---

        function openConfigModal() {
            const currentContent = localStorage.getItem('quizContent') || JSON.stringify(defaultQuizData, null, 2);
            jsonEditor.value = currentContent;
            jsonError.textContent = '';
            configModal.style.display = 'block';
        }

        function closeConfigModal() {
            configModal.style.display = 'none';
        }

        function saveJson() {
            const newJsonString = jsonEditor.value;
            jsonError.textContent = '';
            
            try {
                const newQuizData = JSON.parse(newJsonString);

                if (!newQuizData.questions || !Array.isArray(newQuizData.questions) || !newQuizData.memoryGameSets) {
                    jsonError.textContent = "Erro: O JSON deve ter as chaves 'questions' (array) e 'memoryGameSets' (array).";
                    return;
                }

                localStorage.setItem('quizContent', newJsonString);
                showCustomAlert('Configura√ß√µes salvas com sucesso! O Quiz ser√° recarregado.', true);
                
                closeConfigModal();
                loadQuiz(); 

            } catch (e) {
                jsonError.textContent = `Erro de formata√ß√£o JSON: ${e.message}`;
                showCustomAlert(`Erro de formata√ß√£o JSON: O JSON est√° inv√°lido. Por favor, verifique a sintaxe.`, false);
            }
        }

        // --- Event Listeners ---

        configButton.addEventListener('click', openConfigModal);
        closeModalButton.addEventListener('click', closeConfigModal);
        saveJsonButton.addEventListener('click', saveJson);
        nextButton.addEventListener('click', nextQuestion);

        // Fechar o modal clicando fora dele
        window.addEventListener('click', (event) => {
            if (event.target === configModal) {
                closeConfigModal();
            }
        });

        // --- In√≠cio do Jogo ---
        loadQuiz();
    </script>
</body>
</html>